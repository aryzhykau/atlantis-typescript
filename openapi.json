{"openapi":"3.1.0","info":{"title":"Atlantis API","description":"API для управления тренировками и финансами","version":"1.0.0"},"paths":{"/auth/google":{"get":{"tags":["Auth"],"summary":"Auth Google","description":"Handles Google OAuth, searches for the user in the database, and issues access & refresh tokens.","operationId":"auth_google_auth_google_get","parameters":[{"name":"authorization","in":"header","required":true,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/refresh-token":{"post":{"tags":["Auth"],"summary":"Refresh Token","description":"Refreshes access token using the provided refresh token.","operationId":"refresh_token_auth_refresh_token_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["Users"],"summary":"Get Current User","operationId":"get_current_user_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserMe"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/clients/":{"get":{"tags":["Clients"],"summary":"Get Clients Endpoint","description":"Получает список всех клиентов.","operationId":"get_clients_endpoint_clients__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ClientResponse"},"type":"array","title":"Response Get Clients Endpoint Clients  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Clients"],"summary":"Create Client Endpoint","description":"Создание нового клиента с возможностью автоматического создания студента из данных клиента и добавления дополнительных студентов","operationId":"create_client_endpoint_clients__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/clients/{client_id}":{"get":{"tags":["Clients"],"summary":"Get Client Endpoint","description":"Получает информацию о конкретном клиенте по его ID.","operationId":"get_client_endpoint_clients__client_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Clients"],"summary":"Update Client Endpoint","description":"Обновляет информацию о клиенте.","operationId":"update_client_endpoint_clients__client_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Clients"],"summary":"Delete Client Endpoint","description":"Удаляет клиента и всех связанных с ним студентов.","operationId":"delete_client_endpoint_clients__client_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clients/{client_id}/students":{"get":{"tags":["Clients"],"summary":"Get Client Students Endpoint","description":"Получает список всех студентов, связанных с данным клиентом.","operationId":"get_client_students_endpoint_clients__client_id__students_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentResponse"},"title":"Response Get Client Students Endpoint Clients  Client Id  Students Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clients/{client_id}/status":{"patch":{"tags":["Clients"],"summary":"Update Client Status Endpoint","description":"Обновление статуса клиента с каскадным обновлением статусов связанных студентов","operationId":"update_client_status_endpoint_clients__client_id__status_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/trainers/":{"get":{"tags":["Trainers"],"summary":"Get Trainers Endpoint","operationId":"get_trainers_endpoint_trainers__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainersList"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Trainers"],"summary":"Create Trainer Endpoint","operationId":"create_trainer_endpoint_trainers__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainerCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/trainers/{trainer_id}":{"get":{"tags":["Trainers"],"summary":"Get Trainer Endpoint","operationId":"get_trainer_endpoint_trainers__trainer_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"trainer_id","in":"path","required":true,"schema":{"type":"integer","title":"Trainer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Trainers"],"summary":"Update Trainer Endpoint","operationId":"update_trainer_endpoint_trainers__trainer_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"trainer_id","in":"path","required":true,"schema":{"type":"integer","title":"Trainer Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainerUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Trainers"],"summary":"Delete Trainer Endpoint","operationId":"delete_trainer_endpoint_trainers__trainer_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"trainer_id","in":"path","required":true,"schema":{"type":"integer","title":"Trainer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/trainers/{trainer_id}/status":{"patch":{"tags":["Trainers"],"summary":"Update Trainer Status Endpoint","description":"Обновление статуса тренера (активный/неактивный)","operationId":"update_trainer_status_endpoint_trainers__trainer_id__status_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"trainer_id","in":"path","required":true,"schema":{"type":"integer","title":"Trainer Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/training_types/":{"post":{"tags":["Training Types"],"summary":"Create Training Type Endpoint","operationId":"create_training_type_endpoint_training_types__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTypeCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Training Types"],"summary":"Get Training Types Endpoint","operationId":"get_training_types_endpoint_training_types__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTypesList"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/training_types/{training_type_id}":{"get":{"tags":["Training Types"],"summary":"Get Training Type Endpoint","operationId":"get_training_type_endpoint_training_types__training_type_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_type_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Type Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Training Types"],"summary":"Update Training Type Endpoint","operationId":"update_training_type_endpoint_training_types__training_type_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_type_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Type Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTypeUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/subscriptions/":{"get":{"tags":["Subscriptions"],"summary":"Get Subscriptions Endpoint","operationId":"get_subscriptions_endpoint_subscriptions__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionList"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Subscriptions"],"summary":"Create Subscription Endpoint","operationId":"create_subscription_endpoint_subscriptions__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/subscriptions/{subscription_id}":{"get":{"tags":["Subscriptions"],"summary":"Get Subscription Endpoint","operationId":"get_subscription_endpoint_subscriptions__subscription_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"integer","title":"Subscription Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Subscriptions"],"summary":"Update Subscription Endpoint","description":"Обновление существующего абонемента.\nТолько для админов.","operationId":"update_subscription_endpoint_subscriptions__subscription_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"integer","title":"Subscription Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/subscriptions/student":{"post":{"tags":["Subscriptions"],"summary":"Add Subscription To Student","description":"Добавление абонемента студенту.\nТолько для админов и тренеров.","operationId":"add_subscription_to_student_subscriptions_student_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentSubscriptionCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentSubscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/subscriptions/student/{student_id}":{"get":{"tags":["Subscriptions"],"summary":"Get Student Subscriptions","description":"Получение списка абонементов студента.\nДоступно всем авторизованным пользователям.","operationId":"get_student_subscriptions_subscriptions_student__student_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentSubscriptionResponse"},"title":"Response Get Student Subscriptions Subscriptions Student  Student Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/subscriptions/student/{subscription_id}/auto-renewal":{"patch":{"tags":["Subscriptions"],"summary":"Update Auto Renewal","description":"Обновление статуса автопродления.\nТолько для админов и тренеров.","operationId":"update_auto_renewal_subscriptions_student__subscription_id__auto_renewal_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"integer","title":"Subscription Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentSubscriptionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentSubscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/subscriptions/student/{subscription_id}/freeze":{"post":{"tags":["Subscriptions"],"summary":"Freeze Subscription","description":"Заморозка абонемента.\nТолько для админов и тренеров.","operationId":"freeze_subscription_subscriptions_student__subscription_id__freeze_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"integer","title":"Subscription Id"}},{"name":"freeze_start_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"Freeze Start Date"}},{"name":"freeze_duration_days","in":"query","required":true,"schema":{"type":"integer","title":"Freeze Duration Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentSubscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/subscriptions/student/{subscription_id}/unfreeze":{"post":{"tags":["Subscriptions"],"summary":"Unfreeze Subscription","description":"Разморозка абонемента.\nТолько для админов и тренеров.","operationId":"unfreeze_subscription_subscriptions_student__subscription_id__unfreeze_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"subscription_id","in":"path","required":true,"schema":{"type":"integer","title":"Subscription Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentSubscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/students/":{"get":{"tags":["Students"],"summary":"Get Students Endpoint","operationId":"get_students_endpoint_students__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/StudentResponse"},"type":"array","title":"Response Get Students Endpoint Students  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Students"],"summary":"Create Student Endpoint","operationId":"create_student_endpoint_students__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/students/{student_id}":{"get":{"tags":["Students"],"summary":"Get Student Endpoint","operationId":"get_student_endpoint_students__student_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Students"],"summary":"Update Student Endpoint","operationId":"update_student_endpoint_students__student_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/students/{student_id}/status":{"patch":{"tags":["Students"],"summary":"Update Student Status Endpoint","description":"Обновление статуса студента","operationId":"update_student_status_endpoint_students__student_id__status_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/students/client/{client_id}":{"get":{"tags":["Students"],"summary":"Get Students By Client Endpoint","description":"Получение списка студентов для конкретного клиента","operationId":"get_students_by_client_endpoint_students_client__client_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentResponse"},"title":"Response Get Students By Client Endpoint Students Client  Client Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/students/{student_id}/payments":{"get":{"tags":["Students"],"summary":"Get Student Payments Endpoint","description":"Получение истории платежей для конкретного студента","operationId":"get_student_payments_endpoint_students__student_id__payments_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PaymentHistoryResponse"},"title":"Response Get Student Payments Endpoint Students  Student Id  Payments Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/training_templates/":{"get":{"tags":["Training Templates"],"summary":"Read Training Templates","operationId":"read_training_templates_training_templates__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TrainingTemplateResponse"},"type":"array","title":"Response Read Training Templates Training Templates  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Training Templates"],"summary":"Create Training Template Endpoint","operationId":"create_training_template_endpoint_training_templates__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTemplateCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/training_templates/{template_id}":{"get":{"tags":["Training Templates"],"summary":"Read Training Template","operationId":"read_training_template_training_templates__template_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"integer","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Training Templates"],"summary":"Update Training Template Endpoint","operationId":"update_training_template_endpoint_training_templates__template_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"integer","title":"Template Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTemplateUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Training Templates"],"summary":"Delete Training Template Endpoint","operationId":"delete_training_template_endpoint_training_templates__template_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"integer","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/training_student_templates/":{"get":{"tags":["Training Student Templates"],"summary":"Read Training Student Templates","operationId":"read_training_student_templates_training_student_templates__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TrainingStudentTemplateResponse"},"type":"array","title":"Response Read Training Student Templates Training Student Templates  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Training Student Templates"],"summary":"Create Training Student Template Endpoint","operationId":"create_training_student_template_endpoint_training_student_templates__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingStudentTemplateCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingStudentTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/training_student_templates/{student_template_id}":{"get":{"tags":["Training Student Templates"],"summary":"Read Training Student Template","operationId":"read_training_student_template_training_student_templates__student_template_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_template_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingStudentTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Training Student Templates"],"summary":"Update Training Student Template Endpoint","operationId":"update_training_student_template_endpoint_training_student_templates__student_template_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_template_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Template Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingStudentTemplateUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingStudentTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Training Student Templates"],"summary":"Delete Training Student Template Endpoint","operationId":"delete_training_student_template_endpoint_training_student_templates__student_template_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_template_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingStudentTemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/real-trainings/":{"get":{"tags":["Real Trainings"],"summary":"Get Trainings Endpoint","description":"Получает список реальных тренировок с возможностью фильтрации:\n- По периоду (start_date, end_date)\n- По тренеру (trainer_id)\n- По типу тренировки (training_type_id)\n- С учетом или без учета отмененных тренировок (include_cancelled)\n- С загрузкой или без загрузки студентов (with_students)","operationId":"get_trainings_endpoint_real_trainings__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"End Date"}},{"name":"trainer_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Trainer Id"}},{"name":"training_type_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Training Type Id"}},{"name":"include_cancelled","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Cancelled"}},{"name":"with_students","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"With Students"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RealTrainingResponse"},"title":"Response Get Trainings Endpoint Real Trainings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Real Trainings"],"summary":"Create Training Endpoint","description":"Создает новую реальную тренировку.\nЕсли указан template_id, автоматически копирует студентов из шаблона.","operationId":"create_training_endpoint_real_trainings__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/real-trainings/{training_id}":{"get":{"tags":["Real Trainings"],"summary":"Get Training Endpoint","description":"Получает информацию о конкретной тренировке по её ID.","operationId":"get_training_endpoint_real_trainings__training_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Real Trainings"],"summary":"Update Training Endpoint","description":"Обновляет информацию о тренировке.\nПри указании причины отмены тренировка помечается как отмененная.","operationId":"update_training_endpoint_real_trainings__training_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Real Trainings"],"summary":"Delete Training Endpoint","description":"Удаляет тренировку.\nПри delete_future=True и указанном template_id удаляет все будущие тренировки из этого шаблона.","operationId":"delete_training_endpoint_real_trainings__training_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}},{"name":"delete_future","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Delete Future"}},{"name":"template_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/real-trainings/{training_id}/students":{"post":{"tags":["Real Trainings"],"summary":"Add Student Endpoint","description":"Добавляет студента на тренировку.","operationId":"add_student_endpoint_real_trainings__training_id__students_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingStudentCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingStudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/real-trainings/{training_id}/students/{student_id}/attendance":{"put":{"tags":["Real Trainings"],"summary":"Update Attendance Endpoint","description":"Обновляет статус посещения студента.\nПри отмене автоматически проверяется необходимость оплаты штрафа.","operationId":"update_attendance_endpoint_real_trainings__training_id__students__student_id__attendance_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}},{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingStudentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingStudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/real-trainings/{training_id}/students/{student_id}":{"delete":{"tags":["Real Trainings"],"summary":"Remove Student Endpoint","description":"Удаляет студента с тренировки.\nПри remove_future=True и указанном template_id удаляет студента со всех будущих тренировок из шаблона.","operationId":"remove_student_endpoint_real_trainings__training_id__students__student_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}},{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}},{"name":"remove_future","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Remove Future"}},{"name":"template_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingStudentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/real-trainings/generate-next-week":{"post":{"tags":["Real Trainings"],"summary":"Generate Next Week Endpoint","description":"Генерирует тренировки на следующую неделю на основе активных шаблонов.\nДоступно только для администраторов.\n\nВозвращает:\n- Количество созданных тренировок\n- Список созданных тренировок\n- Период, на который созданы тренировки","operationId":"generate_next_week_endpoint_real_trainings_generate_next_week_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Generate Next Week Endpoint Real Trainings Generate Next Week Post"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/real-trainings/{training_id}/students/{student_id}/cancel":{"delete":{"tags":["Real Trainings"],"summary":"Cancel Student Endpoint","description":"Отмена участия студента в тренировке с проверками:\n- Время до начала (минимум 12 часов)\n- Лимит переносов (максимум 3 в месяц)","operationId":"cancel_student_endpoint_real_trainings__training_id__students__student_id__cancel_delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}},{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentCancellationRequest"}}}},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/real-trainings/{training_id}/cancel":{"post":{"tags":["Real Trainings"],"summary":"Cancel Training Endpoint","description":"Полная отмена тренировки администратором.\n\nПроцесс отмены:\n1. Проверка прав доступа (только администратор)\n2. Отмена тренировки для всех участников\n3. Запуск финансовых процессов (если process_refunds=True)\n4. Закрытие тренировки","operationId":"cancel_training_endpoint_real_trainings__training_id__cancel_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"training_id","in":"path","required":true,"schema":{"type":"integer","title":"Training Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingCancellationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealTrainingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/invoices/{invoice_id}":{"get":{"tags":["Invoices"],"summary":"Get Invoice","description":"Получение информации об инвойсе.\nДоступно всем авторизованным пользователям.","operationId":"get_invoice_invoices__invoice_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/invoices/student/{student_id}":{"get":{"tags":["Invoices"],"summary":"Get Student Invoices","description":"Получение списка инвойсов студента.\nДоступно всем авторизованным пользователям.","operationId":"get_student_invoices_invoices_student__student_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"student_id","in":"path","required":true,"schema":{"type":"integer","title":"Student Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/InvoiceStatus"},{"type":"null"}],"title":"Status"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceList"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/invoices/client/{client_id}":{"get":{"tags":["Invoices"],"summary":"Get Client Invoices","description":"Получение списка инвойсов клиента.\nДоступно всем авторизованным пользователям.","operationId":"get_client_invoices_invoices_client__client_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/InvoiceStatus"},{"type":"null"}],"title":"Status"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceList"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/invoices/subscription":{"post":{"tags":["Invoices"],"summary":"Create Subscription Invoice","description":"Создание инвойса для абонемента.\nДоступно всем авторизованным пользователям.","operationId":"create_subscription_invoice_invoices_subscription_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionInvoiceCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/invoices/training":{"post":{"tags":["Invoices"],"summary":"Create Training Invoice","description":"Создание инвойса для разовой тренировки.\nДоступно всем авторизованным пользователям.","operationId":"create_training_invoice_invoices_training_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingInvoiceCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/invoices/{invoice_id}/cancel":{"post":{"tags":["Invoices"],"summary":"Cancel Invoice","description":"Отмена инвойса.\nТолько для админов.","operationId":"cancel_invoice_invoices__invoice_id__cancel_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/payments/":{"post":{"tags":["Payments"],"summary":"Create Payment","description":"Регистрация нового платежа.\nТолько для админов и тренеров.","operationId":"create_payment_payments__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/payments/{payment_id}":{"delete":{"tags":["Payments"],"summary":"Cancel Payment","description":"Отмена платежа.\nТолько для админов.","operationId":"cancel_payment_payments__payment_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"payment_id","in":"path","required":true,"schema":{"type":"integer","title":"Payment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/payments/client/{client_id}":{"get":{"tags":["Payments"],"summary":"Get Client Payments","description":"Получение списка платежей клиента.\nДоступно админам и тренерам.\n\nArgs:\n    client_id: ID клиента\n    cancelled_status: Статус отмены платежей:\n        - \"all\": все платежи (по умолчанию)\n        - \"cancelled\": только отмененные платежи\n        - \"not_cancelled\": только неотмененные платежи\n    skip: Смещение для пагинации\n    limit: Лимит записей для пагинации","operationId":"get_client_payments_payments_client__client_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}},{"name":"cancelled_status","in":"query","required":false,"schema":{"type":"string","default":"all","title":"Cancelled Status"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PaymentResponse"},"title":"Response Get Client Payments Payments Client  Client Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/payments/client/{client_id}/balance":{"get":{"tags":["Payments"],"summary":"Get Client Balance","description":"Получение текущего баланса клиента.\nДоступно админам и тренерам.","operationId":"get_client_balance_payments_client__client_id__balance_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"integer","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientBalanceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cron/check-auto-renewals":{"post":{"tags":["cron"],"summary":"Check Auto Renewals","description":"Эндпоинт для проверки и обработки автопродлений абонементов.\nЗащищен API ключом (передается в заголовке X-API-Key).\nМожет вызываться внешним сервисом по расписанию (например, Google Apps Script).","operationId":"check_auto_renewals_cron_check_auto_renewals_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"APIKeyHeader":[]}]}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/healthz":{"get":{"summary":"Healthz","operationId":"healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AttendanceStatus":{"type":"string","enum":["present","absent"],"title":"AttendanceStatus"},"ClientBalanceResponse":{"properties":{"client_id":{"type":"integer","title":"Client Id"},"balance":{"type":"number","title":"Balance"}},"type":"object","required":["client_id","balance"],"title":"ClientBalanceResponse","description":"Схема ответа с балансом клиента"},"ClientCreate":{"properties":{"first_name":{"type":"string","maxLength":50,"minLength":2,"title":"First Name"},"last_name":{"type":"string","maxLength":50,"minLength":2,"title":"Last Name"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth","description":"Дата рождения"},"is_student":{"type":"boolean","title":"Is Student","default":false},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","maxLength":15,"minLength":10,"pattern":"^\\+?[0-9]{10,15}$","title":"Phone"},"whatsapp_number":{"anyOf":[{"type":"string","maxLength":15,"minLength":10,"pattern":"^\\+?[0-9]{10,15}$"},{"type":"null"}],"title":"Whatsapp Number"},"students":{"anyOf":[{"items":{"$ref":"#/components/schemas/StudentCreateWithoutClient"},"type":"array"},{"type":"null"}],"title":"Students"}},"type":"object","required":["first_name","last_name","date_of_birth","email","phone"],"title":"ClientCreate"},"ClientResponse":{"properties":{"id":{"type":"integer","title":"Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","title":"Phone"},"role":{"$ref":"#/components/schemas/UserRole"},"is_authenticated_with_google":{"type":"boolean","title":"Is Authenticated With Google"},"whatsapp_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Number"},"balance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Balance"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","required":["id","first_name","last_name","date_of_birth","email","phone","role","is_authenticated_with_google"],"title":"ClientResponse"},"ClientStatusResponse":{"properties":{"id":{"type":"integer","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"deactivation_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deactivation Date"},"affected_students_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Affected Students Count","description":"Количество затронутых студентов при каскадном изменении"}},"type":"object","required":["id","is_active","deactivation_date"],"title":"ClientStatusResponse"},"ClientUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string","maxLength":50,"minLength":2},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string","maxLength":50,"minLength":2},{"type":"null"}],"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","maxLength":15,"minLength":10,"pattern":"^\\+?[0-9]{10,15}$"},{"type":"null"}],"title":"Phone"},"whatsapp_number":{"anyOf":[{"type":"string","maxLength":15,"minLength":10,"pattern":"^\\+?[0-9]{10,15}$"},{"type":"null"}],"title":"Whatsapp Number"},"balance":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Balance"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"date_of_birth":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date Of Birth"}},"type":"object","title":"ClientUpdate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InvoiceList":{"properties":{"items":{"items":{"$ref":"#/components/schemas/InvoiceResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"InvoiceList","description":"Схема списка инвойсов"},"InvoiceResponse":{"properties":{"id":{"type":"integer","title":"Id"},"client_id":{"type":"integer","title":"Client Id"},"student_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Student Id"},"subscription_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Subscription Id"},"training_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Training Id"},"type":{"$ref":"#/components/schemas/InvoiceType"},"amount":{"type":"number","title":"Amount"},"description":{"type":"string","title":"Description"},"status":{"$ref":"#/components/schemas/InvoiceStatus"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"paid_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Paid At"},"cancelled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Cancelled At"},"created_by_id":{"type":"integer","title":"Created By Id"},"cancelled_by_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cancelled By Id"},"is_auto_renewal":{"type":"boolean","title":"Is Auto Renewal"}},"type":"object","required":["id","client_id","student_id","subscription_id","training_id","type","amount","description","status","created_at","created_by_id","is_auto_renewal"],"title":"InvoiceResponse","description":"Схема ответа с информацией об инвойсе"},"InvoiceStatus":{"type":"string","enum":["UNPAID","PAID","CANCELLED"],"title":"InvoiceStatus","description":"Статусы инвойса"},"InvoiceType":{"type":"string","enum":["SUBSCRIPTION","TRAINING"],"title":"InvoiceType","description":"Типы инвойса"},"OperationType":{"type":"string","enum":["PAYMENT","CANCELLATION","INVOICE_PAYMENT"],"title":"OperationType","description":"Типы операций с платежами"},"PaymentCreate":{"properties":{"amount":{"type":"number","title":"Amount","description":"Сумма платежа"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание платежа"},"client_id":{"type":"integer","title":"Client Id","description":"ID клиента"}},"type":"object","required":["amount","client_id"],"title":"PaymentCreate","description":"Схема для создания платежа"},"PaymentHistoryResponse":{"properties":{"id":{"type":"integer","title":"Id"},"client_id":{"type":"integer","title":"Client Id"},"payment_id":{"type":"integer","title":"Payment Id"},"operation_type":{"$ref":"#/components/schemas/OperationType"},"amount":{"type":"number","title":"Amount"},"balance_before":{"type":"number","title":"Balance Before"},"balance_after":{"type":"number","title":"Balance After"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"created_by_id":{"type":"integer","title":"Created By Id"}},"type":"object","required":["id","client_id","payment_id","operation_type","amount","balance_before","balance_after","description","created_at","created_by_id"],"title":"PaymentHistoryResponse"},"PaymentResponse":{"properties":{"amount":{"type":"number","title":"Amount","description":"Сумма платежа"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание платежа"},"id":{"type":"integer","title":"Id"},"client_id":{"type":"integer","title":"Client Id"},"payment_date":{"type":"string","format":"date-time","title":"Payment Date"},"registered_by_id":{"type":"integer","title":"Registered By Id"},"cancelled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Cancelled At"},"cancelled_by_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cancelled By Id"}},"type":"object","required":["amount","id","client_id","payment_date","registered_by_id"],"title":"PaymentResponse","description":"Схема ответа с информацией о платеже"},"RealTrainingCreate":{"properties":{"training_date":{"type":"string","format":"date","title":"Training Date"},"start_time":{"type":"string","format":"time","title":"Start Time"},"responsible_trainer_id":{"type":"integer","title":"Responsible Trainer Id"},"training_type_id":{"type":"integer","title":"Training Type Id"},"template_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Template Id"}},"type":"object","required":["training_date","start_time","responsible_trainer_id","training_type_id"],"title":"RealTrainingCreate"},"RealTrainingResponse":{"properties":{"id":{"type":"integer","title":"Id"},"training_date":{"type":"string","format":"date","title":"Training Date"},"start_time":{"type":"string","format":"time","title":"Start Time"},"trainer":{"$ref":"#/components/schemas/TrainerResponse"},"training_type":{"$ref":"#/components/schemas/TrainingTypeResponse"},"template_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Template Id"},"is_template_based":{"type":"boolean","title":"Is Template Based"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"cancelled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Cancelled At"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"},"students":{"items":{"$ref":"#/components/schemas/RealTrainingStudentResponse"},"type":"array","title":"Students"}},"type":"object","required":["id","training_date","start_time","trainer","training_type","template_id","is_template_based","created_at","updated_at","cancelled_at","cancellation_reason","students"],"title":"RealTrainingResponse"},"RealTrainingStudentCreate":{"properties":{"student_id":{"type":"integer","title":"Student Id"},"template_student_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Template Student Id"}},"type":"object","required":["student_id"],"title":"RealTrainingStudentCreate"},"RealTrainingStudentResponse":{"properties":{"id":{"type":"integer","title":"Id"},"real_training_id":{"type":"integer","title":"Real Training Id"},"student":{"$ref":"#/components/schemas/StudentResponse"},"status":{"anyOf":[{"$ref":"#/components/schemas/AttendanceStatus"},{"type":"null"}]},"notification_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Notification Time"},"cancelled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Cancelled At"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"},"attendance_marked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Attendance Marked At"},"attendance_marked_by":{"anyOf":[{"$ref":"#/components/schemas/TrainerResponse"},{"type":"null"}]},"requires_payment":{"type":"boolean","title":"Requires Payment"}},"type":"object","required":["id","real_training_id","student","status","notification_time","cancelled_at","cancellation_reason","attendance_marked_at","attendance_marked_by","requires_payment"],"title":"RealTrainingStudentResponse"},"RealTrainingStudentUpdate":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/AttendanceStatus"},{"type":"null"}]},"notification_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Notification Time"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"}},"type":"object","title":"RealTrainingStudentUpdate"},"RealTrainingUpdate":{"properties":{"training_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Training Date"},"start_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Start Time"},"responsible_trainer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Responsible Trainer Id"},"training_type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Training Type Id"},"template_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Template Id"},"cancelled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Cancelled At"},"cancellation_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancellation Reason"}},"type":"object","title":"RealTrainingUpdate"},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest"},"StatusUpdate":{"properties":{"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["is_active"],"title":"StatusUpdate"},"StudentCancellationRequest":{"properties":{"reason":{"type":"string","title":"Reason"},"notification_time":{"type":"string","format":"date-time","title":"Notification Time"}},"type":"object","required":["reason","notification_time"],"title":"StudentCancellationRequest"},"StudentCreate":{"properties":{"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth"},"is_active":{"type":"boolean","title":"Is Active","default":true},"client_id":{"type":"integer","title":"Client Id"}},"type":"object","required":["first_name","last_name","date_of_birth","client_id"],"title":"StudentCreate"},"StudentCreateWithoutClient":{"properties":{"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth"}},"type":"object","required":["first_name","last_name","date_of_birth"],"title":"StudentCreateWithoutClient"},"StudentResponse":{"properties":{"id":{"type":"integer","title":"Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth"},"is_active":{"type":"boolean","title":"Is Active"},"client":{"$ref":"#/components/schemas/StudentUser"},"active_subscription_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Active Subscription Id"},"deactivation_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deactivation Date"}},"type":"object","required":["id","first_name","last_name","date_of_birth","is_active","client","deactivation_date"],"title":"StudentResponse"},"StudentStatusResponse":{"properties":{"id":{"type":"integer","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"deactivation_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deactivation Date"},"client_status":{"type":"boolean","title":"Client Status","description":"Статус родительского клиента"}},"type":"object","required":["id","is_active","deactivation_date","client_status"],"title":"StudentStatusResponse"},"StudentSubscriptionCreate":{"properties":{"student_id":{"type":"integer","title":"Student Id","description":"ID студента"},"subscription_id":{"type":"integer","title":"Subscription Id","description":"ID абонемента"},"is_auto_renew":{"type":"boolean","title":"Is Auto Renew","description":"Включено ли автопродление","default":false}},"type":"object","required":["student_id","subscription_id"],"title":"StudentSubscriptionCreate","description":"Схема для создания подписки студента"},"StudentSubscriptionResponse":{"properties":{"student_id":{"type":"integer","title":"Student Id","description":"ID студента"},"subscription_id":{"type":"integer","title":"Subscription Id","description":"ID абонемента"},"is_auto_renew":{"type":"boolean","title":"Is Auto Renew","description":"Включено ли автопродление","default":false},"id":{"type":"integer","title":"Id"},"start_date":{"type":"string","format":"date-time","title":"Start Date"},"end_date":{"type":"string","format":"date-time","title":"End Date"},"freeze_start_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Freeze Start Date"},"freeze_end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Freeze End Date"},"sessions_left":{"type":"integer","title":"Sessions Left"},"transferred_sessions":{"type":"integer","title":"Transferred Sessions"},"auto_renewal_invoice_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Auto Renewal Invoice Id"},"status":{"type":"string","title":"Status"}},"type":"object","required":["student_id","subscription_id","id","start_date","end_date","sessions_left","transferred_sessions","status"],"title":"StudentSubscriptionResponse","description":"Схема ответа с информацией о подписке студента"},"StudentSubscriptionUpdate":{"properties":{"is_auto_renew":{"type":"boolean","title":"Is Auto Renew","description":"Включить/выключить автопродление"}},"type":"object","required":["is_auto_renew"],"title":"StudentSubscriptionUpdate","description":"Схема для обновления подписки студента"},"StudentUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"date_of_birth":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date Of Birth"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"client_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Client Id"}},"type":"object","title":"StudentUpdate"},"StudentUser":{"properties":{"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"phone":{"type":"string","title":"Phone"},"email":{"type":"string","title":"Email"},"balance":{"type":"number","title":"Balance"}},"type":"object","required":["first_name","last_name","phone","email","balance"],"title":"StudentUser"},"SubscriptionCreate":{"properties":{"name":{"type":"string","title":"Name","description":"Название абонемента"},"price":{"type":"number","title":"Price","description":"Стоимость абонемента"},"number_of_sessions":{"type":"integer","title":"Number Of Sessions","description":"Количество тренировок"},"validity_days":{"type":"integer","title":"Validity Days","description":"Срок действия в днях"},"is_active":{"type":"boolean","title":"Is Active","description":"Активен ли абонемент","default":true}},"type":"object","required":["name","price","number_of_sessions","validity_days"],"title":"SubscriptionCreate","description":"Схема для создания абонемента"},"SubscriptionInvoiceCreate":{"properties":{"client_id":{"type":"integer","title":"Client Id","description":"ID клиента"},"student_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Student Id","description":"ID студента"},"amount":{"type":"number","title":"Amount","description":"Сумма"},"description":{"type":"string","title":"Description","description":"Описание/причина"},"is_auto_renewal":{"type":"boolean","title":"Is Auto Renewal","description":"Создан ли для автопродления","default":false},"subscription_id":{"type":"integer","title":"Subscription Id","description":"ID абонемента"}},"type":"object","required":["client_id","amount","description","subscription_id"],"title":"SubscriptionInvoiceCreate","description":"Схема для создания инвойса для абонемента"},"SubscriptionList":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SubscriptionResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"SubscriptionList","description":"Схема списка абонементов"},"SubscriptionResponse":{"properties":{"name":{"type":"string","title":"Name","description":"Название абонемента"},"price":{"type":"number","title":"Price","description":"Стоимость абонемента"},"number_of_sessions":{"type":"integer","title":"Number Of Sessions","description":"Количество тренировок"},"validity_days":{"type":"integer","title":"Validity Days","description":"Срок действия в днях"},"is_active":{"type":"boolean","title":"Is Active","description":"Активен ли абонемент","default":true},"id":{"type":"integer","title":"Id"}},"type":"object","required":["name","price","number_of_sessions","validity_days","id"],"title":"SubscriptionResponse","description":"Схема ответа с информацией об абонементе"},"SubscriptionUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name","description":"Название абонемента"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price","description":"Стоимость абонемента"},"number_of_sessions":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Number Of Sessions","description":"Количество тренировок"},"validity_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Validity Days","description":"Срок действия в днях"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","description":"Активен ли абонемент"}},"type":"object","title":"SubscriptionUpdate","description":"Схема для обновления абонемента"},"TokensResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["access_token","refresh_token"],"title":"TokensResponse"},"TrainerCreate":{"properties":{"first_name":{"type":"string","maxLength":50,"minLength":2,"title":"First Name"},"last_name":{"type":"string","maxLength":50,"minLength":2,"title":"Last Name"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","maxLength":15,"minLength":10,"title":"Phone"},"salary":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Salary"},"is_fixed_salary":{"type":"boolean","title":"Is Fixed Salary","default":false}},"type":"object","required":["first_name","last_name","date_of_birth","email","phone"],"title":"TrainerCreate"},"TrainerResponse":{"properties":{"id":{"type":"integer","title":"Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","title":"Phone"},"role":{"$ref":"#/components/schemas/UserRole"},"is_authenticated_with_google":{"type":"boolean","title":"Is Authenticated With Google"},"salary":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Salary"},"is_fixed_salary":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Fixed Salary"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"deactivation_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deactivation Date"}},"type":"object","required":["id","first_name","last_name","date_of_birth","email","phone","role","is_authenticated_with_google"],"title":"TrainerResponse"},"TrainerUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"salary":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Salary"},"is_fixed_salary":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Fixed Salary"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"TrainerUpdate"},"TrainersList":{"properties":{"trainers":{"items":{"$ref":"#/components/schemas/TrainerResponse"},"type":"array","title":"Trainers"}},"type":"object","required":["trainers"],"title":"TrainersList"},"TrainingCancellationRequest":{"properties":{"reason":{"type":"string","title":"Reason"},"process_refunds":{"type":"boolean","title":"Process Refunds","default":true}},"type":"object","required":["reason"],"title":"TrainingCancellationRequest","description":"Схема для отмены тренировки"},"TrainingInvoiceCreate":{"properties":{"client_id":{"type":"integer","title":"Client Id","description":"ID клиента"},"student_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Student Id","description":"ID студента"},"amount":{"type":"number","title":"Amount","description":"Сумма"},"description":{"type":"string","title":"Description","description":"Описание/причина"},"is_auto_renewal":{"type":"boolean","title":"Is Auto Renewal","description":"Создан ли для автопродления","default":false},"training_id":{"type":"integer","title":"Training Id","description":"ID тренировки"}},"type":"object","required":["client_id","amount","description","training_id"],"title":"TrainingInvoiceCreate","description":"Схема для создания инвойса для тренировки"},"TrainingStudentTemplateCreate":{"properties":{"training_template_id":{"type":"integer","exclusiveMinimum":0.0,"title":"ID шаблона тренировки","description":"Идентификатор шаблона тренировки","error_messages":{"gt":"ID шаблона тренировки должен быть положительным числом","type":"ID шаблона тренировки должен быть числом"}},"student_id":{"type":"integer","exclusiveMinimum":0.0,"title":"ID студента","description":"Идентификатор студента","error_messages":{"gt":"ID студента должен быть положительным числом","type":"ID студента должен быть числом"}},"start_date":{"type":"string","format":"date","title":"Дата начала","description":"Дата начала тренировок"}},"type":"object","required":["training_template_id","student_id","start_date"],"title":"TrainingStudentTemplateCreate","examples":[{"start_date":"2024-03-20","student_id":1,"training_template_id":1}]},"TrainingStudentTemplateResponse":{"properties":{"id":{"type":"integer","title":"Id"},"training_template_id":{"type":"integer","title":"Training Template Id"},"student_id":{"type":"integer","title":"Student Id"},"start_date":{"type":"string","format":"date","title":"Start Date"},"is_frozen":{"type":"boolean","title":"Is Frozen","default":false},"freeze_start_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Freeze Start Date"},"freeze_duration_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Freeze Duration Days"},"student":{"$ref":"#/components/schemas/StudentResponse"}},"type":"object","required":["id","training_template_id","student_id","start_date","student"],"title":"TrainingStudentTemplateResponse","examples":[{"id":1,"is_frozen":false,"start_date":"2024-03-20","student":{"id":1,"name":"Иван Иванов"},"student_id":1,"training_template_id":1}]},"TrainingStudentTemplateUpdate":{"properties":{"is_frozen":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Статус заморозки","description":"Флаг заморозки тренировок"},"freeze_start_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Дата начала заморозки","description":"Дата начала периода заморозки"},"freeze_duration_days":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Длительность заморозки","description":"Количество дней заморозки","error_messages":{"gt":"Длительность заморозки должна быть положительным числом","type":"Длительность заморозки должна быть числом"}}},"type":"object","title":"TrainingStudentTemplateUpdate","examples":[{"freeze_duration_days":14,"freeze_start_date":"2024-03-25","is_frozen":true}]},"TrainingTemplateCreate":{"properties":{"day_number":{"type":"integer","maximum":7.0,"minimum":1.0,"title":"День недели","description":"Номер дня недели (1-7, где 1 - понедельник)","error_messages":{"ge":"День недели должен быть от 1 до 7","le":"День недели должен быть от 1 до 7","type":"День недели должен быть числом"}},"start_time":{"type":"string","format":"time","title":"Время начала","description":"Время начала тренировки в формате ЧЧ:ММ:СС","example":"10:00:00"},"responsible_trainer_id":{"type":"integer","exclusiveMinimum":0.0,"title":"ID тренера","description":"Идентификатор ответственного тренера","error_messages":{"gt":"ID тренера должен быть положительным числом","type":"ID тренера должен быть числом"}},"training_type_id":{"type":"integer","exclusiveMinimum":0.0,"title":"ID типа тренировки","description":"Идентификатор типа тренировки","error_messages":{"gt":"ID типа тренировки должен быть положительным числом","type":"ID типа тренировки должен быть числом"}}},"type":"object","required":["day_number","start_time","responsible_trainer_id","training_type_id"],"title":"TrainingTemplateCreate","examples":[{"day_number":1,"responsible_trainer_id":1,"start_time":"10:00:00","training_type_id":2}]},"TrainingTemplateResponse":{"properties":{"id":{"type":"integer","title":"Id"},"day_number":{"type":"integer","title":"Day Number"},"start_time":{"type":"string","format":"time","title":"Start Time"},"responsible_trainer":{"$ref":"#/components/schemas/TrainerResponse"},"training_type":{"$ref":"#/components/schemas/TrainingTypeResponse"},"assigned_students":{"items":{"$ref":"#/components/schemas/TrainingStudentTemplateResponse"},"type":"array","title":"Assigned Students"}},"type":"object","required":["id","day_number","start_time","responsible_trainer","training_type","assigned_students"],"title":"TrainingTemplateResponse","examples":[{"assigned_students":[{"id":1,"is_frozen":false,"start_date":"2024-03-20","student":{"id":1,"name":"Иван Иванов"},"student_id":1,"training_template_id":1}],"day_number":1,"id":1,"responsible_trainer":{"id":1,"name":"Петр Петров"},"start_time":"10:00:00","training_type":{"id":2,"name":"Йога"}}]},"TrainingTemplateUpdate":{"properties":{"day_number":{"anyOf":[{"type":"integer","maximum":7.0,"minimum":1.0},{"type":"null"}],"title":"День недели","description":"Номер дня недели (1-7, где 1 - понедельник)","error_messages":{"ge":"День недели должен быть от 1 до 7","le":"День недели должен быть от 1 до 7","type":"День недели должен быть числом"}},"start_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Время начала","description":"Время начала тренировки в формате ЧЧ:ММ:СС","example":"11:00:00"},"responsible_trainer_id":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"ID тренера","description":"Идентификатор ответственного тренера","error_messages":{"gt":"ID тренера должен быть положительным числом","type":"ID тренера должен быть числом"}},"training_type_id":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"ID типа тренировки","description":"Идентификатор типа тренировки","error_messages":{"gt":"ID типа тренировки должен быть положительным числом","type":"ID типа тренировки должен быть числом"}}},"type":"object","title":"TrainingTemplateUpdate","examples":[{"start_time":"12:00:00"}]},"TrainingTypeCreate":{"properties":{"name":{"type":"string","maxLength":50,"minLength":2,"title":"Name","description":"Название типа тренировки (от 2 до 50 символов)","error_messages":{"max_length":"Название тренировки не должно превышать 50 символов","min_length":"Название тренировки должно содержать минимум 2 символа","type":"Название тренировки должно быть строкой"}},"is_subscription_only":{"type":"boolean","title":"Is Subscription Only","description":"Флаг, указывающий, доступна ли тренировка только по подписке","error_messages":{"type":"Поле is_subscription_only должно быть булевым значением (true/false)"}},"price":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Price","description":"Цена тренировки (должна быть больше или равна 0)","error_messages":{"ge":"Цена не может быть отрицательной","type":"Цена должна быть числом"}},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","title":"Color","description":"Цвет в формате HEX (#RRGGBB)","error_messages":{"pattern":"Цвет должен быть в формате HEX (#RRGGBB), например: #FF0000","type":"Цвет должен быть строкой"}},"is_active":{"type":"boolean","title":"Is Active","description":"Статус активности типа тренировки","default":true,"error_messages":{"type":"Поле is_active должно быть булевым значением (true/false)"}}},"type":"object","required":["name","is_subscription_only","color"],"title":"TrainingTypeCreate","examples":[{"color":"#FFFFFF","is_active":true,"is_subscription_only":false,"name":"Йога для начинающих","price":15.99},{"color":"#000000","is_active":true,"is_subscription_only":true,"name":"Фитнес"}]},"TrainingTypeResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"is_subscription_only":{"type":"boolean","title":"Is Subscription Only"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"color":{"type":"string","title":"Color"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","name","is_subscription_only","color","is_active"],"title":"TrainingTypeResponse"},"TrainingTypeUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":50,"minLength":2},{"type":"null"}],"title":"Name","description":"Название типа тренировки (от 2 до 50 символов)","error_messages":{"max_length":"Название тренировки не должно превышать 50 символов","min_length":"Название тренировки должно содержать минимум 2 символа","type":"Название тренировки должно быть строкой"}},"is_subscription_only":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Subscription Only","description":"Флаг, указывающий, доступна ли тренировка только по подписке","error_messages":{"type":"Поле is_subscription_only должно быть булевым значением (true/false)"}},"price":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Price","description":"Цена тренировки (должна быть больше или равна 0)","error_messages":{"ge":"Цена не может быть отрицательной","type":"Цена должна быть числом"}},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color","description":"Цвет в формате HEX (#RRGGBB)","error_messages":{"pattern":"Цвет должен быть в формате HEX (#RRGGBB), например: #FF0000","type":"Цвет должен быть строкой"}},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","description":"Статус активности типа тренировки","error_messages":{"type":"Поле is_active должно быть булевым значением (true/false)"}}},"type":"object","title":"TrainingTypeUpdate","examples":[{"color":"#000000","is_active":true,"is_subscription_only":true,"name":"Пилатес","price":19.99},{"color":"#FF5733","is_active":false,"is_subscription_only":false,"name":"Кроссфит","price":25.0}]},"TrainingTypesList":{"properties":{"training_types":{"items":{"$ref":"#/components/schemas/TrainingTypeResponse"},"type":"array","title":"Training Types"}},"type":"object","required":["training_types"],"title":"TrainingTypesList"},"UserMe":{"properties":{"id":{"type":"integer","title":"Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","title":"Phone"},"role":{"$ref":"#/components/schemas/UserRole"}},"type":"object","required":["id","first_name","last_name","email","phone","role"],"title":"UserMe"},"UserRole":{"type":"string","enum":["CLIENT","TRAINER","ADMIN"],"title":"UserRole"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"auth/google"}}},"APIKeyHeader":{"type":"apiKey","in":"header","name":"X-API-Key"}}}}